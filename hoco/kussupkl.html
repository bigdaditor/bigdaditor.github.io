<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>꾸씁-클</title>
    <style>
        body {
            font-family: monospace;
            background: #111;
            color: #0f0;
            padding: 2rem;
        }
        h1, h2 {
            color: #fff;
        }
        a {
            color: #0ff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        ul {
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
<h1>📝 꾸씁-클 Weekly Posts</h1>
<div id="about"></div>
<div id="notice"></div>
<div id="weeks"></div>

<script>
    fetch('/data/kussupkl.json')
        .then(res => res.json())
        .then(data => {
            const aboutDiv = document.getElementById('about');
            const noticeDiv = document.getElementById('notice');
            const weeksDiv = document.getElementById('weeks');

            // About
            if (data.about) {
                const aboutEl = document.createElement('p');
                aboutEl.innerHTML = `📌 <a href="${data.about}" target="_blank">꾸씁클 소개 바로가기</a>`;
                aboutDiv.appendChild(aboutEl);
            }

            // Notice
            if (Array.isArray(data.notice)) {
                const noticeTitle = document.createElement('h2');
                noticeTitle.textContent = '📢 글쓰기 선언문';
                noticeDiv.appendChild(noticeTitle);
                const ul = document.createElement('ul');
                data.notice.forEach(entry => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="${entry.link}" target="_blank">${entry.author}</a>`;
                    ul.appendChild(li);
                });
                noticeDiv.appendChild(ul);
            }

            // Week별 포스트
            Object.entries(data)
                .filter(([key]) => key.startsWith('week'))
                .forEach(([weekKey, posts]) => {
                    const section = document.createElement('section');
                    const title = document.createElement('h2');
                    title.textContent = `📅 ${weekKey.replace('week', 'Week ')}`
                    section.appendChild(title);

                    posts.forEach(entry => {
                        const author = document.createElement('p');
                        author.textContent = `👤 ${entry.author}`;
                        section.appendChild(author);

                        const ul = document.createElement('ul');
                        const links = Array.isArray(entry.link) ? entry.link : [entry.link];

                        links.forEach(url => {
                            const li = document.createElement('li');
                            li.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;
                            ul.appendChild(li);
                        });

                        section.appendChild(ul);
                    });

                    weeksDiv.appendChild(section);
                });
        });
</script>
</body>
</html>